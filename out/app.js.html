<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: app.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: app.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const express = require('express');
const bodyParser = require('body-parser');
const cors = require('cors');

const app = express();
const port = 3000;

// allow cors domain requests
app.use(cors());

// configuring body parser middleware
app.use(bodyParser.urlencoded({ extended: false }));
app.use(bodyParser.json());

// define a route with method post to get data from front-end
app.post('/simulate', (req, res) => {
    // get body of request
    const body = req.body;

    // check if for the user will either change or stick selected in the simulator
    const isSwitchSelected = body["isSwitchSelected"] || false; // set default value to false
    const numbersOfRound = body["numbersOfRound"] || 100; // set default value to 100

    // calculate and set values
    const result = simulationSystem(numbersOfRound, isSwitchSelected);

    // serve result
    res.send(result);
});


/**
 * core simulation repeat round of game base on the argument number
 *
 * @param {int} numbersOfRound
 * @param {boolean} isSwitchSelected
 * @returns object
 */
function simulationSystem(numbersOfRound, isSwitchSelected) {
    let roundLost, roundWon = 0;

    // repeat based on numbers of the round
    for (let i = 0; i &lt; numbersOfRound; i++) {
        roundWon += simulateRound(isSwitchSelected);
    }

    // calculate lost
    roundLost = numbersOfRound - roundWon;

    // return object of results
    return {
        roundWon,
        roundLost
    };
}


/**
 * simulate a round of the game and check if, with random data, the user wins the game or not
 *
 * @param {boolean} isSwitchSelected
 * @returns boolean
 */
function simulateRound(isSwitchSelected) {

    // generate two random number for the car and user-selected gate
    const hasCar = getRandomNumber(0, 3);
    const selectedGate = getRandomNumber(0, 3);

    // select the gate with the goat to reveal
    const disclosedGate = gateDiscloser(hasCar, selectedGate);

    if (isSwitchSelected) {
        return hasCar === gateDiscloser(disclosedGate, selectedGate);
    } else {
        return hasCar === selectedGate;
    }
}


/**
 * select the gate number from [0, 1, 3] array that does not exist in arguments
 *
 * @param {int} hasCar
 * @param {int} selectedGate
 * @returns int
 */
function gateDiscloser(hasCar, selectedGate) {
    return [0, 1, 2].find(currentGate => {
        if (currentGate !== hasCar &amp;&amp; currentGate !== selectedGate) {
            return true;
        }
        return false;
    });
}


/**
 * generate a random number between min and max
 *
 * @param {int} min
 * @param {int} max
 * @returns int
 */
function getRandomNumber(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min)) + min;
}

app.listen(port, _ => console.log(`Monty Hall API App listening on port ${port}!`));</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#gateDiscloser">gateDiscloser</a></li><li><a href="global.html#getRandomNumber">getRandomNumber</a></li><li><a href="global.html#simulateRound">simulateRound</a></li><li><a href="global.html#simulationSystem">simulationSystem</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Fri Oct 02 2020 01:38:53 GMT+0330 (Iran Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
